{% extends "campaigns/base.html" %}
{% block title %}Email Settings | Campaign System{% endblock %}

{% block content %}
<div class="card neon-card">
  <div class="card-content">
    <span class="card-title">Email & SMTP Settings</span>
    <p class="grey-text text-darken-1" style="margin-bottom: 16px;">
      Configure the admin report email and SMTP credentials.
      If the SMTP test fails, existing settings will be kept.
    </p>

    <form method="post">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="message-panel red lighten-5">
          {% for e in form.non_field_errors %}
            <p class="red-text text-darken-2">{{ e }}</p>
          {% endfor %}
        </div>
      {% endif %}

      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.admin_email.label_tag }}
          {{ form.admin_email }}
          {% for error in form.admin_email.errors %}
            <span class="helper-text red-text">{{ error }}</span>
          {% endfor %}
        </div>

        <div class="input-field col s12 m6">
          {{ form.smtp_email.label_tag }}
          {{ form.smtp_email }}
          {% for error in form.smtp_email.errors %}
            <span class="helper-text red-text">{{ error }}</span>
          {% endfor %}
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.smtp_app_password.label_tag }}
          {{ form.smtp_app_password }}
          {% for error in form.smtp_app_password.errors %}
            <span class="helper-text red-text">{{ error }}</span>
          {% endfor %}
          <span class="helper-text">
            For Gmail, use an <strong>App Password</strong>.
          </span>
        </div>
      </div>

      <button type="submit" class="btn btn-neon waves-effect">
        <i class="material-icons left">save</i>
        Save & Test
      </button>
    </form>
  </div>
</div>
{% endblock %}
